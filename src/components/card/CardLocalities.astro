---
import type { CategoryType } from "../../types/CategoryType";
import OptimizedImage from "../images/OptimizedImage.astro";
import {createCategoryUrl} from "../../libs/urls";
import {getItemsByCategoryId, getSiteInfo} from "../../libs/csv";
import {getTranslations} from "../../i18n";

type CategoryProps = {
  category: CategoryType;
};

const { language } = getSiteInfo();
const t = getTranslations(language);
const { category } = Astro.props as CategoryProps;
const numberOfPosts = getItemsByCategoryId(category.id).length;
---

<!-- Localidad -->
<div
    class="bg-bg text-text rounded-lg shadow-sm p-5 flex flex-col items-center text-center border border-border transition-colors duration-300"
>
  <a href={createCategoryUrl(category)}>
    <OptimizedImage
        src={category.image}
        alt={category.title}
        class="rounded-lg mb-4 w-full h-48 object-cover"
    />
  </a>

  <h2 class="text-xl font-semibold text-primary mb-2">
    <a href={createCategoryUrl(category)} class="hover:underline">
      {category.title}
    </a>
  </h2>

  <p class="text-sm text-muted mb-4">
    {numberOfPosts + " "}
    {numberOfPosts > 1 ? t.ARTICLE_TEXT_PLURAL : t.ARTICLE_TEXT}
  </p>

  <a
      href={createCategoryUrl(category)}
      class="inline-block bg-primary hover:bg-primary-hover text-text text-sm font-semibold px-6 py-2.5 rounded-lg shadow-md hover:shadow-lg ring-1 ring-border transition duration-150 ease-in-out"
  >
    {t.MESSAGE_CLICK_POST_PLURAL}
  </a>
</div>
